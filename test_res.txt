ok  	github.com/moira-alert/moira	(cached)
?   	github.com/moira-alert/moira/api	[no test files]
ok  	github.com/moira-alert/moira/api/controller	(cached)
ok  	github.com/moira-alert/moira/api/dto	(cached)
ok  	github.com/moira-alert/moira/api/handler	(cached)
?   	github.com/moira-alert/moira/api/middleware	[no test files]
ok  	github.com/moira-alert/moira/checker	(cached)
ok  	github.com/moira-alert/moira/checker/metrics/conversion	(cached)
?   	github.com/moira-alert/moira/checker/worker	[no test files]
?   	github.com/moira-alert/moira/clock	[no test files]
?   	github.com/moira-alert/moira/cmd	[no test files]
?   	github.com/moira-alert/moira/cmd/api	[no test files]
?   	github.com/moira-alert/moira/cmd/checker	[no test files]
ok  	github.com/moira-alert/moira/cmd/cli	(cached)
?   	github.com/moira-alert/moira/cmd/filter	[no test files]
?   	github.com/moira-alert/moira/cmd/notifier	[no test files]
?   	github.com/moira-alert/moira/database	[no test files]
[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
12 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
16 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
228 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
240 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
263 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
332 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
338 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
360 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
367 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
375 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
379 total assertions[0m

[32m.[0m[31m[0m[33m[0m[32m
380 total assertions[0m

[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
382 total assertions[0m

[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
384 total assertions[0m

[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
386 total assertions[0m

[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
388 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
431 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
460 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
465 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
492 total assertions[0m

[32m.[0m[32m.[0m2022-11-08 16:02:04.563 dataBase INF Subscribe to metric-event-0 channel, current subscriptions is 1 module=dataBase
2022-11-08 16:02:04.563 dataBase INF Subscribe to metric-event-1 channel, current subscriptions is 2 module=dataBase
2022-11-08 16:02:04.563 dataBase INF Subscribe to metric-event-2 channel, current subscriptions is 3 module=dataBase
2022-11-08 16:02:04.563 dataBase INF Subscribe to metric-event-3 channel, current subscriptions is 4 module=dataBase
2022-11-08 16:02:04.563 dataBase INF Received PONG message module=dataBase
[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
496 total assertions[0m

[32m.[0m2022-11-08 16:02:04.567 dataBase INF Calling shutdown, unsubscribe from '[metric-event-0 metric-event-1 metric-event-2 metric-event-3]' redis channels... module=dataBase
[32m.[0m[31m[0m[33m[0m[32m
498 total assertions[0m

2022-11-08 16:02:04.569 dataBase INF Unsubscribe from metric-event-2 channel, current subscriptions is 3 module=dataBase
2022-11-08 16:02:04.569 dataBase INF Unsubscribe from metric-event-0 channel, current subscriptions is 2 module=dataBase
2022-11-08 16:02:04.569 dataBase INF Unsubscribe from metric-event-1 channel, current subscriptions is 1 module=dataBase
2022-11-08 16:02:04.569 dataBase INF Unsubscribe from metric-event-3 channel, current subscriptions is 0 module=dataBase
2022-11-08 16:02:04.569 dataBase INF No more subscriptions, exit... module=dataBase
2022-11-08 16:02:04.569 dataBase INF No more subscriptions, channel is closed. Stop process data... module=dataBase
2022-11-08 16:02:04.569 dataBase INF Channel closed, end test module=dataBase
[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
500 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
516 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
540 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
549 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
570 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
599 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[32m
626 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[33mx[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[33mx[0m[33mx[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m
Failures:

  * /home/joda/Documents/Work/moira/database/redis/notification_event_test.go 
  Line 70:
  Expected: nil
  Actual:   'nil returned'
  goroutine 294 [running]:
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/reporting/reports.go:143 +0x3c
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/reporting/reports.go:103 +0x5d
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:176 +0xa5
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/doc.go:125 +0x5a
  github.com/moira-alert/moira/database/redis.TestNotificationEvents.func1.1.2()
  	/home/joda/Documents/Work/moira/database/redis/notification_event_test.go:70 +0x46f
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/discovery.go:80 +0x1b
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:261 +0x177
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:163 +0x2c
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x46a
  github.com/jtolds/gls.EnsureGoroutineId(0xc0004635f0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:19 +0xfb
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc000255fe0, 0xc000463590, 0xc0002950e0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x16a
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:162 +0x2dc
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/doc.go:77 +0x75
  github.com/moira-alert/moira/database/redis.TestNotificationEvents.func1.1()
  	/home/joda/Documents/Work/moira/database/redis/notification_event_test.go:44 +0x125
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/discovery.go:80 +0x1b
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:261 +0x177
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:163 +0x2c
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x46a
  github.com/jtolds/gls.EnsureGoroutineId(0xc000463530)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:19 +0xfb
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc000255fe0, 0xc0004634d0, 0xc0002950b0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x16a
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:162 +0x2dc
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/doc.go:77 +0x75
  github.com/moira-alert/moira/database/redis.TestNotificationEvents.func1()
  	/home/joda/Documents/Work/moira/database/redis/notification_event_test.go:29 +0xa5
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/discovery.go:80 +0x1b
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:261 +0x177
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:110 +0xdb
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x46a
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x22
  github.com/jtolds/gls._m(0xe856c0?, 0xc0003cdc01?)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x22
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0xc000463020?, 0x0?)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x19
  github.com/jtolds/gls.addStackTag(...)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000463020?)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd8
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc000255fe0, 0xc000462fc0, 0xc00012e560)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x16a
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:105 +0x22f
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/doc.go:75 +0x8b
  github.com/moira-alert/moira/database/redis.TestNotificationEvents(0xc00038b6c0)
  	/home/joda/Documents/Work/moira/database/redis/notification_event_test.go:28 +0x249
  testing.tRunner(0xc00038b6c0, 0xf9b3c0)
  	/usr/lib/go/src/testing/testing.go:1446 +0x10b
  created by testing.(*T).Run
  	/usr/lib/go/src/testing/testing.go:1493 +0x35f
  

  * /home/joda/Documents/Work/moira/database/redis/notification_event_test.go 
  Line 157:
  Expected: nil
  Actual:   'nil returned'
  goroutine 294 [running]:
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/reporting/reports.go:143 +0x3c
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/reporting/reports.go:103 +0x5d
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:176 +0xa5
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/doc.go:125 +0x5a
  github.com/moira-alert/moira/database/redis.TestNotificationEvents.func1.2.2()
  	/home/joda/Documents/Work/moira/database/redis/notification_event_test.go:157 +0xef
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/discovery.go:80 +0x1b
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:261 +0x177
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:163 +0x2c
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x46a
  github.com/jtolds/gls.EnsureGoroutineId(0xc000252570)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:19 +0xfb
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc000255fe0, 0xc000252510, 0xc000295578)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x16a
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:162 +0x2dc
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/doc.go:77 +0x75
  github.com/moira-alert/moira/database/redis.TestNotificationEvents.func1.2()
  	/home/joda/Documents/Work/moira/database/redis/notification_event_test.go:155 +0x125
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/discovery.go:80 +0x1b
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:261 +0x177
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:163 +0x2c
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x46a
  github.com/jtolds/gls.EnsureGoroutineId(0xc0002524b0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:19 +0xfb
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc000255fe0, 0xc000252450, 0xc000295548)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x16a
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:162 +0x2dc
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/doc.go:77 +0x75
  github.com/moira-alert/moira/database/redis.TestNotificationEvents.func1()
  	/home/joda/Documents/Work/moira/database/redis/notification_event_test.go:105 +0x125
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/discovery.go:80 +0x1b
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:261 +0x177
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:110 +0xdb
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x46a
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x22
  github.com/jtolds/gls._m(0xe856c0?, 0xc0003cdc01?)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x22
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0xc000463020?, 0x0?)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x19
  github.com/jtolds/gls.addStackTag(...)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000463020?)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd8
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc000255fe0, 0xc000462fc0, 0xc00012e560)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x16a
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:105 +0x22f
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/doc.go:75 +0x8b
  github.com/moira-alert/moira/database/redis.TestNotificationEvents(0xc00038b6c0)
  	/home/joda/Documents/Work/moira/database/redis/notification_event_test.go:28 +0x249
  testing.tRunner(0xc00038b6c0, 0xf9b3c0)
  	/usr/lib/go/src/testing/testing.go:1446 +0x10b
  created by testing.(*T).Run
  	/usr/lib/go/src/testing/testing.go:1493 +0x35f
  

  * /home/joda/Documents/Work/moira/database/redis/notification_event_test.go 
  Line 184:
  Expected: nil
  Actual:   'nil returned'
  goroutine 294 [running]:
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/reporting/reports.go:143 +0x3c
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/reporting/reports.go:103 +0x5d
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:176 +0xa5
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/doc.go:125 +0x5a
  github.com/moira-alert/moira/database/redis.TestNotificationEvents.func1.2.3()
  	/home/joda/Documents/Work/moira/database/redis/notification_event_test.go:184 +0xef
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/discovery.go:80 +0x1b
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:261 +0x177
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:163 +0x2c
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x46a
  github.com/jtolds/gls.EnsureGoroutineId(0xc0002527b0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:19 +0xfb
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc000255fe0, 0xc000252750, 0xc0002955f0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x16a
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:162 +0x2dc
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/doc.go:77 +0x75
  github.com/moira-alert/moira/database/redis.TestNotificationEvents.func1.2()
  	/home/joda/Documents/Work/moira/database/redis/notification_event_test.go:182 +0x1a5
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/discovery.go:80 +0x1b
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:261 +0x177
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:163 +0x2c
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x46a
  github.com/jtolds/gls.EnsureGoroutineId(0xc0002526f0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:19 +0xfb
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc000255fe0, 0xc000252690, 0xc0002955c0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x16a
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:162 +0x2dc
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/doc.go:77 +0x75
  github.com/moira-alert/moira/database/redis.TestNotificationEvents.func1()
  	/home/joda/Documents/Work/moira/database/redis/notification_event_test.go:105 +0x125
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/discovery.go:80 +0x1b
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:261 +0x177
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:110 +0xdb
  github.com/jtolds/gls.(*ContextManager).SetValues.func1(0x0)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:97 +0x46a
  github.com/jtolds/gls.EnsureGoroutineId.func1()
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0x22
  github.com/jtolds/gls._m(0xe856c0?, 0xc0003cdc01?)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:108 +0x22
  github.com/jtolds/gls.github_com_jtolds_gls_markS(0xc000463020?, 0x0?)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:56 +0x19
  github.com/jtolds/gls.addStackTag(...)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/stack_tags.go:49
  github.com/jtolds/gls.EnsureGoroutineId(0xc000463020?)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/gid.go:24 +0xd8
  github.com/jtolds/gls.(*ContextManager).SetValues(0xc000255fe0, 0xc000462fc0, 0xc00012e560)
  	/home/joda/go/pkg/mod/github.com/jtolds/gls@v4.20.0+incompatible/context.go:63 +0x16a
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/context.go:105 +0x22f
  	/home/joda/go/pkg/mod/github.com/smartystreets/goconvey@v1.6.4/convey/doc.go:75 +0x8b
  github.com/moira-alert/moira/database/redis.TestNotificationEvents(0xc00038b6c0)
  	/home/joda/Documents/Work/moira/database/redis/notification_event_test.go:28 +0x249
  testing.tRunner(0xc00038b6c0, 0xf9b3c0)
  	/usr/lib/go/src/testing/testing.go:1446 +0x10b
  created by testing.(*T).Run
  	/usr/lib/go/src/testing/testing.go:1493 +0x35f
  

[0m[33m
668 total assertions[0m

--- FAIL: TestNotificationEvents (6.41s)
[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
674 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
728 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
738 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
774 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
795 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
823 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
828 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
844 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
859 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
865 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
871 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
877 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
883 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
889 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
894 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
898 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
904 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
953 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1013 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1024 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1038 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1043 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1088 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1092 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1260 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1277 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1308 total assertions[0m

[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1310 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1321 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1327 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1333 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1340 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1350 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1354 total assertions[0m

[31m[0m[33m[0m[33m
1354 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1379 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1417 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1454 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1457 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1460 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1463 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1493 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1496 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1521 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1547 total assertions[0m

[32m.[0m[32m.[0m[32m.[0m[31m[0m[33m[0m[33m
1550 total assertions[0m

FAIL
FAIL	github.com/moira-alert/moira/database/redis	30.735s
?   	github.com/moira-alert/moira/database/redis/reply	[no test files]
ok  	github.com/moira-alert/moira/expression	(cached)
ok  	github.com/moira-alert/moira/filter	(cached)
ok  	github.com/moira-alert/moira/filter/connection	(cached)
?   	github.com/moira-alert/moira/filter/heartbeat	[no test files]
?   	github.com/moira-alert/moira/filter/matched_metrics	[no test files]
?   	github.com/moira-alert/moira/filter/patterns	[no test files]
ok  	github.com/moira-alert/moira/image_store/s3	(cached)
ok  	github.com/moira-alert/moira/index	(cached)
ok  	github.com/moira-alert/moira/index/bleve	(cached)
?   	github.com/moira-alert/moira/index/fixtures	[no test files]
ok  	github.com/moira-alert/moira/index/mapping	(cached)
2022-11-08 16:01:50.903 Notifier_Test INF Sender mega-sender registered module=Notifier_Test
2022-11-08 16:01:50.903 Notifier_Test INF Moira Notifier Fetching events started module=Notifier_Test
2022-11-08 16:01:50.903 Notifier_Test INF Moira Notifier Fetching scheduled notifications started module=Notifier_Test
2022-11-08 16:02:06.531 Notifier_Test ERR Failed processEvent. nil returned module=Notifier_Test
2022-11-08 16:02:08.642 Notifier_Test ERR Failed processEvent. nil returned module=Notifier_Test
2022-11-08 16:02:08.644 Notifier_Test ERR Failed processEvent. nil returned module=Notifier_Test
2022-11-08 16:02:10.753 Notifier_Test ERR Failed processEvent. nil returned module=Notifier_Test
2022-11-08 16:02:10.755 Notifier_Test ERR Failed processEvent. nil returned module=Notifier_Test
2022-11-08 16:02:10.756 Notifier_Test ERR Failed processEvent. nil returned module=Notifier_Test
Test timeout2022-11-08 16:02:21.905 Notifier_Test INF Moira Notifier Fetching events stopped module=Notifier_Test
2022-11-08 16:02:21.906 Notifier_Test INF Moira Notifier Fetching scheduled notifications stopped module=Notifier_Test
2022-11-08 16:02:21.906 Notifier_Test INF Waiting senders finish... module=Notifier_Test
2022-11-08 16:02:21.906 Notifier_Test INF Moira Notifier Senders stopped module=Notifier_Test
--- FAIL: TestNotifier (31.01s)
    controller.go:269: missing call(s) to *mock_moira_alert.MockSender.SendEvents(is anything, is equal to {mega-sender mail1@example.com ContactID-000000000000001  } (moira.ContactData), is equal to {triggerID-0000000000001 test trigger 1  [test.target.1] 0 0 false [test-tag-1]} (moira.TriggerData), is anything, is equal to false (bool)) /home/joda/Documents/Work/moira/integration_tests/notifier/notifier_test.go:91
    controller.go:269: aborting test due to missing call(s)
FAIL
FAIL	github.com/moira-alert/moira/integration_tests/notifier	31.025s
?   	github.com/moira-alert/moira/logging/zerolog_adapter	[no test files]
ok  	github.com/moira-alert/moira/metric_source	(cached)
ok  	github.com/moira-alert/moira/metric_source/local	(cached)
ok  	github.com/moira-alert/moira/metric_source/remote	(cached)
?   	github.com/moira-alert/moira/metrics	[no test files]
?   	github.com/moira-alert/moira/mock/clock	[no test files]
?   	github.com/moira-alert/moira/mock/heartbeat	[no test files]
?   	github.com/moira-alert/moira/mock/metric_source	[no test files]
?   	github.com/moira-alert/moira/mock/moira-alert	[no test files]
?   	github.com/moira-alert/moira/mock/notifier	[no test files]
?   	github.com/moira-alert/moira/mock/scheduler	[no test files]
ok  	github.com/moira-alert/moira/notifier	(cached)
ok  	github.com/moira-alert/moira/notifier/events	(cached)
ok  	github.com/moira-alert/moira/notifier/notifications	(cached)
ok  	github.com/moira-alert/moira/notifier/selfstate	(cached)
ok  	github.com/moira-alert/moira/notifier/selfstate/heartbeat	(cached)
ok  	github.com/moira-alert/moira/perfomance_tests/expression	(cached) [no tests to run]
ok  	github.com/moira-alert/moira/perfomance_tests/filter	(cached) [no tests to run]
ok  	github.com/moira-alert/moira/plotting	(cached)
?   	github.com/moira-alert/moira/plotting/fonts	[no test files]
?   	github.com/moira-alert/moira/plotting/fonts/ttftogofile	[no test files]
?   	github.com/moira-alert/moira/plotting/themes/dark	[no test files]
?   	github.com/moira-alert/moira/plotting/themes/light	[no test files]
ok  	github.com/moira-alert/moira/senders	(cached)
ok  	github.com/moira-alert/moira/senders/discord	(cached)
ok  	github.com/moira-alert/moira/senders/mail	(cached)
ok  	github.com/moira-alert/moira/senders/msteams	(cached)
ok  	github.com/moira-alert/moira/senders/opsgenie	(cached)
ok  	github.com/moira-alert/moira/senders/pagerduty	(cached)
ok  	github.com/moira-alert/moira/senders/pushover	(cached)
ok  	github.com/moira-alert/moira/senders/script	(cached)
ok  	github.com/moira-alert/moira/senders/selfstate	(cached)
ok  	github.com/moira-alert/moira/senders/slack	(cached)
ok  	github.com/moira-alert/moira/senders/telegram	(cached)
ok  	github.com/moira-alert/moira/senders/twilio	(cached)
ok  	github.com/moira-alert/moira/senders/victorops	(cached)
ok  	github.com/moira-alert/moira/senders/victorops/api	(cached)
ok  	github.com/moira-alert/moira/senders/webhook	(cached)
?   	github.com/moira-alert/moira/support	[no test files]
ok  	github.com/moira-alert/moira/templating	(cached)
ok  	github.com/moira-alert/moira/worker	(cached)
FAIL
